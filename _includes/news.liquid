<div class="news">
  {% if site.news != blank %}
    {% assign news_size = site.news | size %}
    <div
      class="news-list"
      {% if include.limit and page.announcements.scrollable and news_size > 3 %}
      style="max-height: 400px; overflow-y: auto;"
      {% endif %}>
      {% assign news = site.news | sort: "date" | reverse %}
      {% if include.limit and page.announcements.limit %}
        {% assign news_limit = page.announcements.limit %}
      {% else %}
        {% assign news_limit = news_size %}
      {% endif %}

      <ul class="news-items">
        {% for item in news limit: news_limit %}
          <li class="news-item{% if item.announce %} news-item--announcement{% endif %}">
            <div class="news-meta">
              <span class="news-date">{{ item.date | date: '%b %d, %Y' }}</span>
              {% if item.badge %}
                <span class="news-badge news-badge--{{ item.badge | downcase | replace: ' ', '-' }}">{{ item.badge }}</span>
              {% endif %}
            </div>
            <div class="news-body">
              <div class="news-content">
                {% if item.inline %}
                  {{ item.content | remove: '<p>' | remove: '</p>' | emojify | link_coauthors }}
                {% else %}
                  {% if item.link %}
                    <a class="news-title" href="{{ item.link | relative_url }}">{{ item.title }}</a>
                  {% else %}
                    <a class="news-title" href="{{ item.url | relative_url }}">{{ item.title }}</a>
                  {% endif %}
                {% endif %}
              </div>
              {% if item.speaker %}
                <div class="news-speaker">
                  <i class="fas fa-user-tie"></i>
                  {{ item.speaker }}
                </div>
              {% endif %}
              <i class="fas fa-arrow-right news-arrow-icon"></i>
            </div>
          </li>
        {% endfor %}
      </ul>

      {% if include.limit and page.announcements.scrollable and news_size > 3 %}
        <div class="news-more">
          <a href="{{ '/news/' | relative_url }}">View all news â†’</a>
        </div>
      {% endif %}
    </div>
  {% else %}
    <p class="no-news">No news so far...</p>
  {% endif %}
</div>